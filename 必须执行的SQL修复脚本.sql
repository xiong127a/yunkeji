-- ============================================
-- 必须执行的 SQL 修复脚本
-- ============================================
-- 数据库：yunkeji
-- 说明：按顺序执行以下SQL语句即可
-- ============================================

-- ============================================
-- 1. 修复 V1 迁移校验和（如果还没修复）
-- ============================================
UPDATE flyway_schema_history 
SET checksum = -203041221 
WHERE version = '1';

-- ============================================
-- 2. 删除失败的 V5 迁移记录
-- ============================================
DELETE FROM flyway_schema_history 
WHERE version = '5';

-- ============================================
-- 3. 验证修复结果
-- ============================================
SELECT version, description, checksum, installed_on, success
FROM flyway_schema_history 
ORDER BY installed_rank;

-- ============================================
-- 执行完成！
-- ============================================
-- 执行完以上SQL后，重启应用即可
-- Flyway 会自动执行 V5 迁移（现在是空脚本，不会报错）
-- ============================================

