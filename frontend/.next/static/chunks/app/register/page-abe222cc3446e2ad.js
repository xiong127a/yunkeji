(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[11],{42163:function(e,t,s){Promise.resolve().then(s.bind(s,5878))},65126:function(e,t,s){"use strict";var r=s(54829),a=s(11490);t.Z=new class{async login(e,t){let s=await this.axiosInstance.post("/auth/login",{username:e,password:t});return s.data}async register(e,t,s){let r=await this.axiosInstance.post("/auth/register",{username:e,email:t,password:s});return r.data}async submitRealEstateQuery(e){let t=await this.axiosInstance.post("/user/real-estate/query",e);return t.data}async submitRealEstateQueryWithFiles(e){let t=await this.axiosInstance.post("/user/real-estate/query-with-files",e,{headers:{"Content-Type":"multipart/form-data"}});return t.data}async queryRealEstateResult(e){let t=await this.axiosInstance.get("/user/real-estate/result/".concat(e));return t.data}async getUserQueryRecords(){let e=await this.axiosInstance.get("/user/real-estate/records");return e.data}async getQueryRecordDetail(e){let t=await this.axiosInstance.get("/user/real-estate/records/".concat(e));return t.data}async getQueryRecordFiles(e){let t=await this.axiosInstance.get("/user/real-estate/records/".concat(e,"/files"));return t.data}constructor(){this.axiosInstance=r.Z.create({baseURL:"http://localhost:8080/yunkeji/api",timeout:1e4,headers:{"Content-Type":"application/json"}}),this.axiosInstance.interceptors.request.use(e=>{let t=a.Z.get("token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e)),this.axiosInstance.interceptors.response.use(e=>e,e=>{var t;return(null===(t=e.response)||void 0===t?void 0:t.status)===401&&(a.Z.remove("token"),window.location.href="/login"),Promise.reject(e)})}}},5878:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return Register}});var r=s(57437),a=s(2265),n=s(88110),i=s.n(n),o=s(28170),l=s(79404),u=s(43574),c=s(33116),d=s(20020),h=s(18142),m=s(35302),x=s(24033),g=s(61396),p=s.n(g),y=s(16691),j=s.n(y),f=s(65126),Z=s(13689);let{Title:w}=m.default;function Register(){let[e,t]=(0,a.useState)(!1),s=(0,x.useRouter)(),onFinish=async e=>{t(!0);try{let t=await f.Z.register(e.username,e.email,e.password);t.success?(c.ZP.success("注册成功"),(0,Z.uB)(t.token),s.push("/dashboard")):c.ZP.error(t.message||"注册失败")}catch(e){c.ZP.error("注册失败，请检查网络连接")}finally{t(!1)}};return(0,r.jsx)("div",{className:"container",children:(0,r.jsx)(d.Z,{justify:"center",style:{marginTop:"50px"},children:(0,r.jsx)(h.Z,{xs:24,sm:20,md:16,lg:12,xl:10,children:(0,r.jsxs)(o.Z,{children:[(0,r.jsx)("div",{style:{textAlign:"center",marginBottom:"20px"},children:(0,r.jsx)(j(),{src:"/yunkeji-logo.jpg",alt:"云科技Logo",width:100,height:100,style:{borderRadius:"8px"}})}),(0,r.jsx)(w,{level:2,style:{textAlign:"center"},children:"用户注册"}),(0,r.jsxs)(l.Z,{name:"register",onFinish:onFinish,autoComplete:"off",layout:"vertical",children:[(0,r.jsx)(l.Z.Item,{label:"用户名",name:"username",rules:[{required:!0,message:"请输入用户名!"}],children:(0,r.jsx)(u.Z,{})}),(0,r.jsx)(l.Z.Item,{label:"邮箱",name:"email",rules:[{required:!0,message:"请输入邮箱!"},{type:"email",message:"请输入有效的邮箱地址!"}],children:(0,r.jsx)(u.Z,{})}),(0,r.jsx)(l.Z.Item,{label:"密码",name:"password",rules:[{required:!0,message:"请输入密码!"}],children:(0,r.jsx)(u.Z.Password,{})}),(0,r.jsx)(l.Z.Item,{label:"确认密码",name:"confirmPassword",dependencies:["password"],rules:[{required:!0,message:"请确认密码!"},e=>{let{getFieldValue:t}=e;return{validator:(e,s)=>s&&t("password")!==s?Promise.reject(Error("两次输入的密码不一致!")):Promise.resolve()}}],children:(0,r.jsx)(u.Z.Password,{})}),(0,r.jsx)(l.Z.Item,{children:(0,r.jsx)(i(),{type:"primary",htmlType:"submit",loading:e,block:!0,children:"注册"})}),(0,r.jsx)(l.Z.Item,{children:(0,r.jsxs)("div",{style:{textAlign:"center"},children:["已有账号？ ",(0,r.jsx)(p(),{href:"/login",children:"立即登录"})]})})]})]})})})})}},13689:function(e,t,s){"use strict";s.d(t,{$8:function(){return isAuthenticated},H6:function(){return removeAuthToken},uB:function(){return setAuthToken}});var r=s(11490);let setAuthToken=e=>{r.Z.set("token",e,{expires:7})},getAuthToken=()=>r.Z.get("token"),removeAuthToken=()=>{r.Z.remove("token")},isAuthenticated=()=>!!getAuthToken()}},function(e){e.O(0,[890,284,594,396,140,691,892,971,472,744],function(){return e(e.s=42163)}),_N_E=e.O()}]);