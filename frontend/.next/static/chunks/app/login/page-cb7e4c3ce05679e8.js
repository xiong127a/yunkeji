(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[626],{89109:function(e,t,s){Promise.resolve().then(s.bind(s,87355))},65126:function(e,t,s){"use strict";var n=s(54829),r=s(11490);t.Z=new class{async login(e,t){let s=await this.axiosInstance.post("/auth/login",{username:e,password:t});return s.data}async register(e,t,s){let n=await this.axiosInstance.post("/auth/register",{username:e,email:t,password:s});return n.data}async submitRealEstateQuery(e){let t=await this.axiosInstance.post("/user/real-estate/query",e);return t.data}async submitRealEstateQueryWithFiles(e){let t=await this.axiosInstance.post("/user/real-estate/query-with-files",e,{headers:{"Content-Type":"multipart/form-data"}});return t.data}async queryRealEstateResult(e){let t=await this.axiosInstance.get("/user/real-estate/result/".concat(e));return t.data}async getUserQueryRecords(){let e=await this.axiosInstance.get("/user/real-estate/records");return e.data}async getQueryRecordDetail(e){let t=await this.axiosInstance.get("/user/real-estate/records/".concat(e));return t.data}async getQueryRecordFiles(e){let t=await this.axiosInstance.get("/user/real-estate/records/".concat(e,"/files"));return t.data}constructor(){this.axiosInstance=n.Z.create({baseURL:"http://localhost:8080/yunkeji/api",timeout:1e4,headers:{"Content-Type":"application/json"}}),this.axiosInstance.interceptors.request.use(e=>{let t=r.Z.get("token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e)),this.axiosInstance.interceptors.response.use(e=>e,e=>{var t;return(null===(t=e.response)||void 0===t?void 0:t.status)===401&&(r.Z.remove("token"),window.location.href="/login"),Promise.reject(e)})}}},87355:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return Login}});var n=s(57437),r=s(2265),a=s(88110),i=s.n(a),o=s(28170),u=s(79404),c=s(43574),l=s(33116),h=s(20020),d=s(18142),x=s(35302),g=s(24033),m=s(61396),y=s.n(m),p=s(16691),f=s.n(p),j=s(65126),Z=s(13689);let{Title:k}=x.default;function Login(){let[e,t]=(0,r.useState)(!1),s=(0,g.useRouter)(),onFinish=async e=>{t(!0);try{let t=await j.Z.login(e.username,e.password);t.success?(l.ZP.success("登录成功"),(0,Z.uB)(t.token),s.push("/dashboard")):l.ZP.error(t.message||"登录失败")}catch(e){l.ZP.error("登录失败，请检查网络连接")}finally{t(!1)}};return(0,n.jsx)("div",{className:"container",children:(0,n.jsx)(h.Z,{justify:"center",style:{marginTop:"50px"},children:(0,n.jsx)(d.Z,{xs:24,sm:20,md:16,lg:12,xl:10,children:(0,n.jsxs)(o.Z,{children:[(0,n.jsx)("div",{style:{textAlign:"center",marginBottom:"20px"},children:(0,n.jsx)(f(),{src:"/yunkeji-logo.jpg",alt:"云科技Logo",width:100,height:100,style:{borderRadius:"8px"}})}),(0,n.jsx)(k,{level:2,style:{textAlign:"center"},children:"用户登录"}),(0,n.jsxs)(u.Z,{name:"login",onFinish:onFinish,autoComplete:"off",layout:"vertical",children:[(0,n.jsx)(u.Z.Item,{label:"用户名",name:"username",rules:[{required:!0,message:"请输入用户名!"}],children:(0,n.jsx)(c.Z,{})}),(0,n.jsx)(u.Z.Item,{label:"密码",name:"password",rules:[{required:!0,message:"请输入密码!"}],children:(0,n.jsx)(c.Z.Password,{})}),(0,n.jsx)(u.Z.Item,{children:(0,n.jsx)(i(),{type:"primary",htmlType:"submit",loading:e,block:!0,children:"登录"})}),(0,n.jsx)(u.Z.Item,{children:(0,n.jsxs)("div",{style:{textAlign:"center"},children:["还没有账号？ ",(0,n.jsx)(y(),{href:"/register",children:"立即注册"})]})})]})]})})})})}},13689:function(e,t,s){"use strict";s.d(t,{$8:function(){return isAuthenticated},H6:function(){return removeAuthToken},uB:function(){return setAuthToken}});var n=s(11490);let setAuthToken=e=>{n.Z.set("token",e,{expires:7})},getAuthToken=()=>n.Z.get("token"),removeAuthToken=()=>{n.Z.remove("token")},isAuthenticated=()=>!!getAuthToken()}},function(e){e.O(0,[890,284,594,396,140,691,892,971,472,744],function(){return e(e.s=89109)}),_N_E=e.O()}]);